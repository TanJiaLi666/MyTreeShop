<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tulingxueyuan.mall.modules.sms.mapper.SmsHomeCategoryMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.tulingxueyuan.mall.modules.sms.model.SmsHomeCategory">
        <id column="id" property="id" />
        <result column="category_id" property="categoryId" />
        <result column="category_name" property="categoryName" />
        <result column="type" property="type" />
        <result column="status" property="status" />
        <result column="pic" property="pic" />
        <result column="url" property="url" />
        <result column="sort" property="sort" />
    </resultMap>
    <resultMap id="getcategory" extends="BaseResultMap" type="com.tulingxueyuan.mall.modules.sms.model.SmsHomeCategory">
        <result property="categoryParentId" column="parent_id"/>
    </resultMap>
    <select id="getHomeCategory" resultMap="getcategory">
        SELECT
            id,
            category_id,
            category_name,
            `type`,
            `status`,
            pic,
            url,
            sort ,
            (SELECT pc.parent_id FROM`pms_product_category` pc WHERE pc.id = shc.`category_id`) parent_id
        FROM
            sms_home_category shc
        WHERE
            shc.id=1
    </select>
</mapper>
